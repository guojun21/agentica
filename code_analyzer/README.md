# ä»£ç æ¥å£åˆ†æå™¨ (Code Analyzer)

åŸºäº Agentica æ¡†æ¶çš„ä»£ç æ¥å£è‡ªåŠ¨åˆ†æå·¥å…·ã€‚è‡ªåŠ¨æ‰«æä»£ç é¡¹ç›®ä¸­çš„ HTTP/gRPC æ¥å£ï¼Œä½¿ç”¨ AI ç”Ÿæˆè¯¦ç»†çš„æ¥å£æ–‡æ¡£ï¼ŒåŒ…å«ä»å…¥å£åˆ°æ•°æ®åº“çš„å®Œæ•´è°ƒç”¨é“¾åˆ†æã€‚

## åŠŸèƒ½ç‰¹ç‚¹

- ğŸ” **è‡ªåŠ¨å‘ç°æ¥å£**: æ”¯æŒå¤šç§æ¡†æ¶çš„ HTTP å’Œ gRPC æ¥å£æ£€æµ‹
  - HTTP: Flask, FastAPI, Django, Gin, Echo, Chi, Express, NestJS, Spring
  - gRPC: Protobuf å®šä¹‰, Go/Python/Java å®ç°
  
- ğŸ“ **æ™ºèƒ½æ–‡æ¡£ç”Ÿæˆ**: ä½¿ç”¨ Claude 4.5 Opus åˆ†æä»£ç ï¼Œç”Ÿæˆè¯¦ç»†æ–‡æ¡£
  - æ¥å£æ¦‚è¿°
  - è¯·æ±‚å‚æ•°
  - å®Œæ•´è°ƒç”¨é“¾ï¼ˆä»å…¥å£åˆ°æ•°æ®åº“ï¼‰
  - æ¡ä»¶åˆ†æ”¯å’Œä¸šåŠ¡é€»è¾‘
  - æ•°æ®åº“æ“ä½œ
  - ä¸šåŠ¡ç›®çš„æ€»ç»“

- ğŸ“Š **è¿›åº¦ç®¡ç†**: è‡ªåŠ¨è¿½è¸ªåˆ†æè¿›åº¦ï¼Œæ”¯æŒæ–­ç‚¹ç»­ä¼ 
  
- â° **å®šæ—¶ä»»åŠ¡**: æ”¯æŒå®šæ—¶è‡ªåŠ¨åˆ†æï¼Œé€æ­¥å®Œæˆæ•´ä¸ªé¡¹ç›®

- ğŸ”’ **åªè¯»æ¨¡å¼**: ç»å¯¹ä¸ä¼šä¿®æ”¹æºä»£ç ï¼Œåªè¯»å–å’Œåˆ†æ

## å®‰è£…ä¾èµ–

```bash
cd /path/to/agentica
pip install -r requirements.txt
```

## ä½¿ç”¨æ–¹æ³•

### 1. æ‰«æé¡¹ç›®æ¥å£

å…ˆæ‰«æé¡¹ç›®ï¼ŒæŸ¥çœ‹å‘ç°äº†å“ªäº›æ¥å£ï¼š

```bash
python -m code_analyzer.main scan --code-dir /path/to/your/project
```

è¾“å‡ºç¤ºä¾‹ï¼š
```
ğŸ” æ‰«æé¡¹ç›®: /path/to/your/project

ğŸ“ é¡¹ç›®ç»Ÿè®¡:
   æ–‡ä»¶æ€»æ•°: 156
   è¯­è¨€åˆ†å¸ƒ:
      go: 89
      python: 45
      protobuf: 12

ğŸ“‹ æŸ¥æ‰¾æ¥å£...

ğŸŒ HTTP æ¥å£ (23 ä¸ª):
   GET    /api/users                               -> handlers/user.go:45
   POST   /api/users                               -> handlers/user.go:78
   ...

ğŸ“¡ gRPC æ¥å£ (8 ä¸ª):
   UserService.GetUser                            -> service/user.go:23
   ...

âœ… å…±å‘ç° 31 ä¸ªæ¥å£
```

### 2. æ‰§è¡Œä¸€æ¬¡åˆ†æ

åˆ†ææŒ‡å®šæ•°é‡çš„æ¥å£ï¼š

```bash
python -m code_analyzer.main analyze \
    --code-dir /path/to/your/project \
    --output-dir /path/to/docs \
    --batch-size 3
```

### 3. å¯åŠ¨å®šæ—¶ä»»åŠ¡

è‡ªåŠ¨å®šæ—¶åˆ†æï¼Œæ¯å°æ—¶åˆ†æä¸€ä¸ªæ¥å£ï¼š

```bash
python -m code_analyzer.main schedule \
    --code-dir /path/to/your/project \
    --output-dir /path/to/docs \
    --interval 3600 \
    --batch-size 1
```

### 4. æŸ¥çœ‹è¿›åº¦

```bash
python -m code_analyzer.main status --output-dir /path/to/docs
```

è¾“å‡ºç¤ºä¾‹ï¼š
```
ğŸ“Š åˆ†æè¿›åº¦:
   é¡¹ç›®åç§°: my-project
   æ€»æ¥å£æ•°: 31
   å·²å®Œæˆ:   12
   å¾…å¤„ç†:   18
   å¤±è´¥:     1
   è¿›åº¦:     38.7%
   æœ€åè¿è¡Œ: 2024-01-08T15:30:00

ğŸ“„ å·²ç”Ÿæˆæ–‡æ¡£ (12 ä¸ª):
   - http_GET_api_users_20240108_143000.md
   - http_POST_api_users_20240108_144500.md
   ...
```

### 5. é‡ç½®å¤±è´¥ä»»åŠ¡

```bash
python -m code_analyzer.main reset --output-dir /path/to/docs
```

## é…ç½®é€‰é¡¹

| å‚æ•° | è¯´æ˜ | é»˜è®¤å€¼ |
|------|------|--------|
| `--code-dir` | è¦åˆ†æçš„ä»£ç ç›®å½•ï¼ˆåªè¯»ï¼‰ | å¿…å¡« |
| `--output-dir` | æ–‡æ¡£è¾“å‡ºç›®å½• | å¿…å¡« |
| `--interval` | å®šæ—¶ä»»åŠ¡é—´éš”ï¼ˆç§’ï¼‰ | 3600 |
| `--batch-size` | æ¯æ¬¡åˆ†æçš„æ¥å£æ•°é‡ | 1 |
| `--api-key` | Poe API å¯†é’¥ | å†…ç½® |
| `--model` | ä½¿ç”¨çš„æ¨¡å‹ | Claude-sonnet |

## ç”Ÿæˆçš„æ–‡æ¡£æ ¼å¼

æ¯ä¸ªæ¥å£ä¼šç”Ÿæˆä¸€ä¸ª Markdown æ–‡æ¡£ï¼ŒåŒ…å«ï¼š

```markdown
---
endpoint_id: http_GET_api_users
endpoint_name: GetUsers
endpoint_type: http
file_path: handlers/user.go
generated_at: 2024-01-08T15:30:00
---

# æ¥å£æ–‡æ¡£: GET /api/users

## 1. æ¥å£æ¦‚è¿°
è·å–ç”¨æˆ·åˆ—è¡¨æ¥å£...

## 2. è¯·æ±‚å‚æ•°
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| page | int | å¦ | é¡µç  |
| size | int | å¦ | æ¯é¡µæ•°é‡ |

## 3. å¤„ç†æµç¨‹
```
GetUsers (handlers/user.go:45)
  â”œâ”€â”€ å‚æ•°éªŒè¯ (validateParams)
  â”œâ”€â”€ è°ƒç”¨ Service å±‚
  â”‚   â””â”€â”€ userService.ListUsers (service/user.go:89)
  â”‚       â”œâ”€â”€ æ£€æŸ¥ç¼“å­˜
  â”‚       â””â”€â”€ æŸ¥è¯¢æ•°æ®åº“
  â”‚           â””â”€â”€ userRepo.FindAll (repo/user.go:34)
  â””â”€â”€ è¿”å›ç»“æœ
```

## 4. æ•°æ®åº“æ“ä½œ
- è¡¨: users
- æ“ä½œ: SELECT
- æŸ¥è¯¢æ¡ä»¶: status = 'active'

## 5. è¿”å›ç»“æœ
...

## 6. ä¸šåŠ¡ç›®çš„
è¯¥æ¥å£ç”¨äºè·å–ç³»ç»Ÿä¸­çš„ç”¨æˆ·åˆ—è¡¨ï¼Œæ”¯æŒåˆ†é¡µæŸ¥è¯¢...
```

## é¡¹ç›®ç»“æ„

```
code_analyzer/
â”œâ”€â”€ __init__.py          # æ¨¡å—å…¥å£
â”œâ”€â”€ config.py            # é…ç½®ç±»
â”œâ”€â”€ code_reader.py       # ä»£ç è¯»å–å™¨ï¼ˆåªè¯»ï¼‰
â”œâ”€â”€ progress_manager.py  # è¿›åº¦ç®¡ç†å™¨
â”œâ”€â”€ analyzer.py          # åˆ†æå™¨ Agent
â”œâ”€â”€ scheduler.py         # å®šæ—¶ä»»åŠ¡è°ƒåº¦å™¨
â”œâ”€â”€ main.py              # å‘½ä»¤è¡Œå…¥å£
â””â”€â”€ README.md            # è¯´æ˜æ–‡æ¡£
```

## æ³¨æ„äº‹é¡¹

1. **åªè¯»æ¨¡å¼**: åˆ†æå™¨ç»å¯¹ä¸ä¼šä¿®æ”¹æºä»£ç ç›®å½•ä¸­çš„ä»»ä½•æ–‡ä»¶
2. **API é™åˆ¶**: Poe API æœ‰è°ƒç”¨é¢‘ç‡é™åˆ¶ï¼Œå»ºè®®è®¾ç½®åˆç†çš„é—´éš”æ—¶é—´
3. **å¤§å‹é¡¹ç›®**: å¯¹äºå¤§å‹é¡¹ç›®ï¼Œå»ºè®®å¢å¤§é—´éš”æ—¶é—´ï¼Œé¿å… API é™åˆ¶
4. **æ–­ç‚¹ç»­ä¼ **: è¿›åº¦ä¼šè‡ªåŠ¨ä¿å­˜ï¼Œä¸­æ–­åå¯ä»¥ç»§ç»­åˆ†æ

## License

MIT

